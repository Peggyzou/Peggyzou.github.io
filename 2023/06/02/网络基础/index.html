<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>网络基础 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="从输入URL到页面加载发生了什么？ 浏览器查找当前URL是否存在缓存，并比较缓存是否过期。（先判断HTTP请求浏览器是否已缓存）  有缓存 如为强制缓存 ，通过 Expires或Cache-Control：max-age判断该缓存是否过期，未过期，直接使用该资源；Expires和max-age，如果两者同时存在，则被Cache-Control的max-age覆盖。 如为协商缓存 ，请求头部带上相关">
<meta property="og:type" content="article">
<meta property="og:title" content="网络基础">
<meta property="og:url" content="http://example.com/2023/06/02/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="从输入URL到页面加载发生了什么？ 浏览器查找当前URL是否存在缓存，并比较缓存是否过期。（先判断HTTP请求浏览器是否已缓存）  有缓存 如为强制缓存 ，通过 Expires或Cache-Control：max-age判断该缓存是否过期，未过期，直接使用该资源；Expires和max-age，如果两者同时存在，则被Cache-Control的max-age覆盖。 如为协商缓存 ，请求头部带上相关">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2023/06/02/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/1.png">
<meta property="og:image" content="http://example.com/2023/06/02/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/2.png">
<meta property="article:published_time" content="2023-06-02T15:32:34.000Z">
<meta property="article:modified_time" content="2023-08-30T12:10:39.909Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2023/06/02/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/1.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-网络基础" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2023/06/02/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2023-06-02T15:32:34.000Z" itemprop="datePublished">2023-06-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      网络基础
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="从输入URL到页面加载发生了什么？"><a href="#从输入URL到页面加载发生了什么？" class="headerlink" title="从输入URL到页面加载发生了什么？"></a>从输入URL到页面加载发生了什么？</h1><ol>
<li>浏览器查找当前URL是否存在缓存，并比较缓存是否过期。（先判断HTTP请求浏览器是否已缓存）</li>
</ol>
<p><strong>有缓存</strong></p>
<p>如为<strong>强制缓存</strong> ，通过 <code>Expires或Cache-Control：max-age</code>判断该缓存是否过期，未过期，直接使用该资源；Expires和max-age，如果两者同时存在，则被Cache-Control的max-age覆盖。</p>
<p>如为<strong>协商缓存</strong> ，请求头部带上相关信息如 <code>if-none-match（Etag）</code>与 <code>if-modified-since(last-modified)</code>，验证缓存是否有效，若有效则返回状态码为 <code>304</code>，若无效则重新返回资源，状态码为 <code>200</code></p>
<ol start="2">
<li>DNS解析URL对应的IP</li>
<li>根据IP建立TCP连接（三次握手）（<code>握手过程见下文</code>）</li>
<li>HTTP发起请求</li>
<li>服务器处理请求，浏览器接收HTTP响应</li>
<li>渲染页面，构建DOM树</li>
</ol>
<ul>
<li>HTML 解析，生成DOM树</li>
<li>根据 CSS 解析生成 CSS 树</li>
<li>结合 DOM 树和 CSS 规则树，生成渲染树</li>
<li>根据渲染树计算每一个节点的信息（layout布局）</li>
<li>根据计算好的信息绘制页面</li>
</ul>
<p>如果遇到 script 标签，则判断是否含有 defer 或者 async 属性，如果有，异步去下载该资源；如果没有设置，暂停dom的解析，去加载script的资源，然后执行该js代码（ <strong>script标签加载和执行会阻塞页面的渲染</strong> ）</p>
<ol start="7">
<li>关闭TCP连接（四次挥手）</li>
</ol>
<h1 id="http-https"><a href="#http-https" class="headerlink" title="http/https"></a>http/https</h1><h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><p>http协议又叫超文本传输协议，它是应用层中使用最多的协议，</p>
<p>http与我们常说的socket有什么区别吗？</p>
<p>我们使用的网络可以分为（会话层和表示层可以忽略），每一层使用下一层的功能，并为上一层提供接口，我们经常听说的http协议就是应用层的协议，其中应用层协议包括ftp等等，而应用层还需要使用传输层的协议，http使用的就是tcp协议，http3计划使用udp协议。不过不管是tcp还是udp都是使用网络层的ip协议。不过传输层及以下层都是在操作系统内核中的，不利于我们使用，所以在用户态设计了socket接口来帮助我们使用tcp或者udp的网络协议。而http协议则是已经定义好解析标准的能让我们直接使用的协议。</p>
<h3 id="http1-0"><a href="#http1-0" class="headerlink" title="http1.0"></a>http1.0</h3><p>http1.0是个短连接，即每发一次请求，就建立一次连接，一次响应后就释放连接，这种方式简化了http的请求响应，但是却造成了重大的浪费：不能并行请求，每次请求都需要建立连接和释放连接，导致每次请求都需要三次握手和四次挥手。</p>
<h3 id="http1-1"><a href="#http1-1" class="headerlink" title="http1.1"></a>http1.1</h3><ol>
<li>长连接: 每个连接完成一次请求后先不关闭，在一定时间内可以发送多次请求。通过设置请求头<em>Connection: keep-alive</em>来实现。</li>
<li>管道化技术: 虽然长连接减少了握手消耗，但是每次都要前一次请求完成之后才能发送下一次请求，管道化技术允许在一个请求没有响应之前发送多次请求。不过管道话技术要求响应必须按照请求发送的顺序返回，否则无法解析。存在队头阻塞。实际使用不多。</li>
</ol>
<h3 id="http2"><a href="#http2" class="headerlink" title="http2"></a>http2</h3><ol>
<li>二进制分帧：http2设计出了二进制分帧技术，http1中的数据都是通过文本文本传输的，但是二进制结构更有利于数据处理，因为计算机只认识二进制，所以传输时不需要文本与二进制之间的转换。</li>
<li>http1中的管道技术虽然支持反多次请求，但是响应必须按照顺序返回，不能实现真正的并发，存在队头阻塞问题。针对这个问题，http2将每个响应分成若干个帧序列，而每个帧序列都有流号，标记属于哪个响应，这样即使每个帧序列乱序到客户端，还是能够根据流id重新组装，解决了http方面的队头阻塞，真正实现多路复用。</li>
<li>头部压缩：在大多数时候，我们请求或者响应的数据可能很少（例如ajax请求），但是同样需要传输各种请求头，尤其是cookie。这无疑给http带来负担，而头部压缩就是解决重复请求头发送的问题。</li>
<li>服务器推送：在http1中，上一个响应发送完了，服务器才能发送下一个请求，但在http2里，可以将多个响应一起发送。例如在一个html文件中有个多js，css文件，为了快速解析页面，可以直接向客户端推送js文件，从而减少客户端请求的时间。</li>
</ol>
<p>http2存在的缺陷：http2虽然实现了多路复用，但是并没有解决tcp方面的队头阻塞。而且，同一个连接内多个流传输，可能会导致响应事件时间变长，相比http1容易出现超时重传；再者，h2适合于大量冗余的请求，对于少量请求并没有太大优势。</p>
<h3 id="http3"><a href="#http3" class="headerlink" title="http3"></a>http3</h3><p>http3协议使用udp为传输层协议，udp不需要握手就可以直接发送数据，因此udp是不可靠的传输层协议，所以就需要自己实现tcp的流量控制和拥塞控制。</p>
<h2 id="https"><a href="#https" class="headerlink" title="https"></a>https</h2><p>http协议都是明文传输的，而且不会对应用数据和主机进行验证，这样即使数据被窃取和篡改我们也不得而知，所以为了保证http的安全，在它的基础上加了TSL/SSL安全协议。形成了我们所说的https协议。</p>
<p><img src="1.png" alt="1685723109077"></p>
<p>http之所以不安全最大的原因就是使用明文传输，所以加密成了最大的问题，目前分为两大类加密算法。</p>
<ul>
<li>对称加密：DES(分组加密算法)，AES(可以看作是DES的升级版)</li>
<li>非对称加密：RSA、DSA</li>
</ul>
<p><img src="2.png" alt="1685723237404"></p>
<p>由于目前公钥加密算法的开销比较大，所以一般采用对称加密来保密信息。但是对称加密过程，密钥如何传输？这时可以使用公私钥来进行传输，因为公私钥使用公钥加密，私钥解密，所以只要是对方公钥加密的数据只有对方的私钥才能解密。</p>
<h2 id="http和https的区别"><a href="#http和https的区别" class="headerlink" title="http和https的区别"></a>http和https的区别</h2><ol>
<li><p>安全角度</p>
<p>http属于明文传输协议，https属于加密传输协议，传输的数据需要经过SSL/TLS加密，因此有更高的安全性。</p>
</li>
<li><p>端口角度</p>
<p>http: 80; https: 443</p>
</li>
<li><p>加密与证书角度</p>
<p>http不需要向服务端申请证书</p>
<p>https在TCP三次握手后，需要进行SSL的握手，协商加密使用的对称加密密钥，还需要向服务端申请证书，浏览器安装对应的根证书。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/06/02/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" data-id="clm52imwa001hc4wp8j9h61mi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/06/02/%E6%8E%A5%E5%8F%A3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          接口
        
      </div>
    </a>
  
  
    <a href="/2023/05/30/%E6%89%8B%E5%86%99%E6%BA%90%E4%BB%A3%E7%A0%81/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">手写源代码</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ts/" rel="tag">ts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/" rel="tag">商城项目</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6%E5%8C%96%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E3%80%81%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">组件化、模块化、工程化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" rel="tag">网络基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB/" rel="tag">网络攻击</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JS/" style="font-size: 20px;">JS</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/ts/" style="font-size: 10px;">ts</a> <a href="/tags/%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE/" style="font-size: 10px;">商城项目</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 15px;">框架</a> <a href="/tags/%E7%BB%84%E4%BB%B6%E5%8C%96%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E3%80%81%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 10px;">组件化、模块化、工程化</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">网络基础</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB/" style="font-size: 10px;">网络攻击</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/30/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93/">浏览器渲染</a>
          </li>
        
          <li>
            <a href="/2023/08/13/typescript/">typescript</a>
          </li>
        
          <li>
            <a href="/2023/06/02/MongoDB/">MongoDB</a>
          </li>
        
          <li>
            <a href="/2023/06/02/express%E6%A1%86%E6%9E%B6/">express框架</a>
          </li>
        
          <li>
            <a href="/2023/06/02/%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6/">会话控制</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>